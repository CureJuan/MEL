"use strict";(self.webpackChunkfuse_react_app=self.webpackChunkfuse_react_app||[]).push([[535,235],{85235:function(e,t,r){r.r(t);var n=r(29439),s=r(47313),i=(r(24211),r(14241)),a=r(74399),u=r(48542),o=r(18662),c=r(22408),l=r(97890),d=r(43850),f=(r(52430),r(46417));i.StylesManager.applyTheme("defaultV2");t.default=function(){var e=(0,s.useState)({locale:"English",title:{English:"Multi",Spanish:"Multi sp",French:"Multi fr"},logoPosition:"right",pages:[{name:"page1",elements:[{type:"text",name:"question1",title:{default:"Test",Spanish:"Test",French:"Test"}}]}],showTitle:!0}),t=(0,n.Z)(e,2),r=t[0],p=t[1],h=(0,s.useState)(""),m=(0,n.Z)(h,2),x=m[0],g=m[1],v=new i.Model(r),b=(0,s.useState)(!1),j=(0,n.Z)(b,2),y=j[0],Z=j[1],S=(0,c.I0)(),Y=(0,l.s0)();return(0,s.useEffect)((function(){var e=window.location.href,t=e.split("/");u.Y.debug("Url>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>."),u.Y.debug(e),u.Y.debug(t),u.Y.debug(t[t.length-1]);var r=t[t.length-1];u.Y.debug("id"),u.Y.debug(r),""!=r&&r.includes("-")&&(g(r),(0,o.XY)(r).then((function(e){u.Y.debug("Validate response"),u.Y.debug(e),p(e.data.formFieldsJson),Z(!0)})).catch((function(e){u.Y.debug("Validate error"),u.Y.debug(e),422==e.response.data.statusCode&&(S((0,d.PV)({message:e.response.data.message,variant:"error"})),setTimeout((function(){Y("/welcome")}),5e3))})))}),[]),v.onComplete.add((function(e,t){u.Y.debug(e.data),(0,o.Nb)({email:"",formResponseJson:e.data,surveyjsFormId:x}).then((function(e){u.Y.debug("added response"),u.Y.debug(e)})).catch((function(e){u.Y.debug("added error"),u.Y.debug(e)})),u.Y.debug(t)})),(0,f.jsx)("div",{className:"flex justify-center items-center",children:(0,f.jsx)("div",{className:"w-[90%] h-[90%]",children:y&&(0,f.jsx)(a.Survey,{model:v})})})}},18662:function(e,t,r){r.d(t,{LY:function(){return g},Nb:function(){return N},OJ:function(){return m},Wy:function(){return b},XY:function(){return S},qZ:function(){return y}});var n=r(1413),s=r(15861),i=r(64687),a=r.n(i),u=r(61222),o=(r(48542),"https://cap-net-mel-uat.azurewebsites.net/api"),c="/surveyjs/addSurveyjsForm",l="/surveyjs/editSurveyJsForm",d="/surveyjs/getAllFormStructures",f="/surveyjs/publishFormStructure",p="/surveyjs/validatePublishedForm",h="/surveyjs/addFormResponse";function m(e){return x.apply(this,arguments)}function x(){return(x=(0,s.Z)(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,u.WY)({url:o+c,method:"POST",body:t,withCredentials:!0}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function g(e,t){return v.apply(this,arguments)}function v(){return(v=(0,s.Z)(a().mark((function e(t,r){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,u.WY)({url:o+l,method:"PUT",body:t,params:{formId:r},withCredentials:!0}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function b(e,t,r){return j.apply(this,arguments)}function j(){return(j=(0,s.Z)(a().mark((function e(t,r,n){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,u.WY)({url:o+d,method:"GET",params:{pageSize:t,pageIndex:r,searchKeyword:n},withCredentials:!0}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function y(e){return Z.apply(this,arguments)}function Z(){return(Z=(0,s.Z)(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,u.WY)({url:o+f,method:"PUT",params:(0,n.Z)({},t),withCredentials:!0}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function S(e){return Y.apply(this,arguments)}function Y(){return(Y=(0,s.Z)(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,u.WY)({url:o+p,method:"GET",params:{formId:t},withCredentials:!0}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function N(e){return w.apply(this,arguments)}function w(){return(w=(0,s.Z)(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,u.WY)({url:o+h,method:"POST",body:t,withCredentials:!0}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},21535:function(e,t,r){r.r(t),r.d(t,{default:function(){return I}});var n=r(93433),s=r(29439),i=r(47313),a=(r(72632),r(39728)),u=r(81597),o=r(24511),c=r(57983),l=r(58796),d=r(66835),f=r(57861),p=r(67478),h=r(82295),m=r(32050),x=r(48542),g=r(22408),v=r(43850),b=r(97890),j=r(58631),y=r(93682),Z=(r(43216),r(86307),r(52574),r(14241)),S=(r(74399),r(85235),r(18662)),Y=(r(22716),r(91579),r(52430),r(46417));Z.surveyLocalization.supportedLocales=["English","French","Spanish"];var N={showLogicTab:!0,questionTypes:["boolean","checkbox","comment","dropdown","tagbox","image","imagepicker","matrix","matrixdropdown","matrixdynamic","multipletext","panel","paneldynamic","radiogroup","rating","ranking","signaturepad","text"],showTranslationTab:!0},w=function(e){var t=(0,o.$)("surveyForm").t,r=(0,g.I0)(),n=(0,i.useState)(""),a=(0,s.Z)(n,2),u=(a[0],a[1],(0,i.useState)("")),c=(0,s.Z)(u,2),l=(c[0],c[1],(0,i.useState)("")),d=(0,s.Z)(l,2),f=(d[0],d[1]),p=(0,i.useState)(null),h=(0,s.Z)(p,2),m=h[0],b=h[1];void 0==m&&((m=new y.SurveyCreator(N)).saveSurveyFunc=function(e,t){t(e,!0),j()},x.Y.debug("called 1"),b(m)),(0,i.useEffect)((function(){x.Y.debug("called 2"),e.isEdit&&(m.json=e.formData.formFieldsJson)}),[]);var j=function(){x.Y.debug(JSON.stringify(m.JSON)),f(JSON.stringify(m.JSON));var n=m.JSON;void 0!=n.title?(x.Y.debug("Title"),x.Y.debug(n.title),e.isEdit?(0,S.LY)({formFieldsJson:m.JSON,surveyjsFormName:n.title},e.formData.surveyjsFormId).then((function(e){x.Y.debug("response for add survey form"),x.Y.debug(e),Z()})).catch((function(e){x.Y.debug("error for add survey form"),x.Y.debug(e)})):(0,S.OJ)({formFieldsJson:m.JSON,surveyjsFormName:n.title}).then((function(e){x.Y.debug("response for add survey form"),x.Y.debug(e),Z()})).catch((function(e){x.Y.debug("error for add survey form"),x.Y.debug(e)}))):r((0,v.PV)({message:t("ENTER_SURVEY_TITLE"),variant:"warning"}))},Z=function(){e.handleShowList()};return(0,Y.jsxs)("div",{children:[(0,Y.jsx)("div",{children:(0,Y.jsx)("p",{onClick:Z,className:"w-fit cursor-pointer",children:t("BACK")})}),(0,Y.jsx)("div",{children:(0,Y.jsx)(y.SurveyCreatorComponent,{creator:(e.isEdit&&(m.JSON=e.formData.formFieldsJson),m)})})]})},E=r(61689),T=r(67559),F=r(48535),k=r(65954),C=r(61113),I=function(){var e=(0,o.$)("surveyForm").t,t=((0,g.I0)(),(0,g.v9)(j.dy),(0,b.s0)(),(0,i.useState)(!1)),r=(0,s.Z)(t,2),v=r[0],y=r[1],Z=(0,i.useState)([]),N=(0,s.Z)(Z,2),I=N[0],O=N[1],_=(0,i.useState)(!1),A=(0,s.Z)(_,2),D=A[0],J=(A[1],(0,i.useState)(1)),L=(0,s.Z)(J,2),R=L[0],M=(L[1],(0,i.useState)("updatedAt")),P=(0,s.Z)(M,2),V=(P[0],P[1],(0,i.useState)(-1)),W=(0,s.Z)(V,2),U=(W[0],W[1],(0,i.useState)()),z=(0,s.Z)(U,2),B=z[0],q=(z[1],(0,i.useState)("")),K=(0,s.Z)(q,2),G=K[0],H=K[1],X=(0,i.useState)(!1),$=(0,s.Z)(X,2),Q=$[0],ee=$[1],te=(0,i.useState)({}),re=(0,s.Z)(te,2),ne=re[0],se=re[1];(0,i.useEffect)((function(){ie(10,R,G)}),[]);var ie=function(e,t,r){(0,S.Wy)(e,t-1,r).then((function(e){x.Y.debug("list response"),x.Y.debug(e),O((0,n.Z)(e.data.formList))})).catch((function(e){x.Y.debug("list error"),x.Y.debug(e)}))};return document.title="Survey Form | Cap-Net MEL",(0,Y.jsx)("div",{className:"px-[30px] p-[20px]",children:(0,Y.jsxs)("div",{className:"mt-[15px] px-[15px] p-[20px] bg-[#ffffff] rounded-[14px] drop-shadow-[0px_0px_6px_#00000029]",children:[!v&&(0,Y.jsxs)(Y.Fragment,{children:[(0,Y.jsxs)("div",{className:"flex items-center justify-end",children:[(0,Y.jsx)(E.Z,{title:e("SEARCH_INSTITUTE_NAME"),children:(0,Y.jsxs)("div",{className:"divSearch w-[210px] flex items-center justify-start px-[15px] mr-[20px]",children:[(0,Y.jsx)(c.Z,{style:{color:"#1D1D2380",width:"17px",height:"17px"}}),(0,Y.jsx)(a.Z,{label:"",placeholder:e("SEARCH"),onChange:function(e){return H(e.target.value)},className:"w-[100%]",onKeyDown:function(e){"Enter"===e.key&&ie(10,R,G)}})]})}),(0,Y.jsx)("div",{children:(0,Y.jsx)(l.Z,{className:"contained-btn","aria-label":"",size:"small",onClick:function(){y(!0)},children:e("CREAt_SURVEY_FORM")})})]}),(0,Y.jsxs)("div",{className:"mt-[20px] overflow-hidden",children:[(0,Y.jsx)(m.dY,{component:h.Z,children:(0,Y.jsxs)(d.Z,{"aria-label":"simple table",sx:{minWidth:650},children:[(0,Y.jsx)(m.EE,{children:(0,Y.jsxs)(m.uk,{children:[(0,Y.jsxs)(p.Z,{align:"left",children:[" ",e("SR_NO")]}),(0,Y.jsx)(p.Z,{align:"left",children:e("NAME")}),(0,Y.jsx)(p.Z,{align:"left",children:e("FORM_LINK")}),(0,Y.jsx)(p.Z,{align:"left",children:e("ACTIONS")})]})}),(0,Y.jsx)(f.Z,{children:I&&I.length>0&&I.map((function(t,r){return(0,Y.jsxs)(m.uk,{sx:{"&:last-child td, &:last-child th":{border:0}},className:"hover:bg-[#D7DBEC4D]",children:[(0,Y.jsx)(p.Z,{align:"left",children:r+1}),(0,Y.jsx)(p.Z,{scope:"row",align:"left",className:"ellipsis",children:(0,Y.jsx)(E.Z,{title:(0,Y.jsx)(C.Z,{style:{textTransform:"capitalize"},children:t.surveyjsFormName}),children:(0,Y.jsx)("span",{children:t.surveyjsFormName})})}),(0,Y.jsx)(p.Z,{scope:"row",align:"left",className:"ellipsis",children:(0,Y.jsx)(E.Z,{title:(0,Y.jsx)(C.Z,{style:{textTransform:"capitalize"},children:t.link}),children:(0,Y.jsx)("a",{href:t.link,target:"_blank",style:{color:"#226EB5",borderBottom:"1px solid #226EB5",background:"none"},children:t.link})})}),(0,Y.jsx)(p.Z,{align:"left",children:(0,Y.jsxs)("div",{className:"flex items-center",children:[(0,Y.jsx)("div",{className:"pr-[10px]",children:(0,Y.jsx)(E.Z,{title:t.isActive?e("ACTIVATED"):e("DEACTIVATED"),children:(0,Y.jsx)(T.Z,{checked:t.isActive,onClick:function(e){return r=e,n=t.surveyjsFormId,x.Y.debug(r.target.checked),x.Y.debug(n),void(0,S.qZ)({formId:n,isPublished:r.target.checked}).then((function(e){x.Y.debug(e),ie(10,R,G)})).catch((function(e){x.Y.debug(e)}));var r,n}})})}),!t.isDirty&&(0,Y.jsxs)("div",{children:[" ",(0,Y.jsx)(E.Z,{title:e("EDIT"),children:(0,Y.jsx)(F.Z,{className:"flex items-center justify-center",children:(0,Y.jsx)(k.Z,{className:"cursor-pointer",sx:{color:"rgba(78, 139, 195, 1)","&:hover":{color:"rgba(255, 255, 255, 1)"},"&:disabled":{color:"rgba(78, 139, 195, 0.5)"}},onClick:function(){se(t),ee(!0),y(!0)}})})})]})]})})]},t.userId)}))})]})}),D&&(0,Y.jsx)("div",{className:"flex items-center justify-center",children:(0,Y.jsxs)(F.Z,{id:"spinner",sx:{"& > div":{backgroundColor:"palette.secondary.main"}},children:[(0,Y.jsx)("div",{className:"bounce1"}),(0,Y.jsx)("div",{className:"bounce2"}),(0,Y.jsx)("div",{className:"bounce3"})]})}),0==I.length&&!D&&(0,Y.jsx)("div",{className:"flex items-center justify-center text-[22px]",children:e("NO_DATA_FOUND")}),I.length>0&&!D&&(0,Y.jsx)("div",{className:"mt-[20px]",children:(0,Y.jsx)(u.Z,{className:"float-right",count:B,color:"primary",page:R,onChange:function(e,t){ie(10,t,G)},shape:"rounded"})})]})]}),v&&(0,Y.jsx)(Y.Fragment,{children:(0,Y.jsx)(w,{handleShowList:function(){y(!1),ie(10,R,G)},formData:ne,isEdit:Q})})]})})}},52430:function(){}}]);